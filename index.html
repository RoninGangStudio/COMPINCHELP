
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compinche | Despensa Social</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Inter:wght@200;300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --olive: #6B7821;
            --blue: #6679A4;
            --gold-deep: #D99C2A;
            --gold-bright: #F3B404;
            --base: #F9F9F7;
            --charcoal: #1C1C1C;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--base);
            color: var(--charcoal);
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        .font-serif { font-family: 'Playfair Display', serif; }
        
        section { scroll-margin-top: 100px; }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: var(--base); }
        ::-webkit-scrollbar-thumb { background: var(--olive); }

        .fade-in {
            animation: fadeIn 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-reveal {
            opacity: 0;
            transform: translateY(20px);
            transition: all 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .section-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .grain::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0.04;
            pointer-events: none;
            z-index: 9999;
            background-image: url("https://www.transparenttextures.com/patterns/natural-paper.png");
        }

        .line-draw {
            width: 0;
            height: 1px;
            background: var(--olive);
            transition: width 1.2s ease;
        }
        .visible .line-draw { width: 100%; }

        .parallax-container {
            overflow: hidden;
            position: relative;
            background-color: #f0f0f0;
        }
        .parallax-img {
            will-change: transform;
            width: 100%;
            height: 120%;
            object-fit: cover;
            position: absolute;
            top: -10%;
            left: 0;
        }

        .hover-lift {
            transition: transform 0.4s ease;
        }
        .hover-lift:hover {
            transform: translateY(-5px);
        }

        .tag-pill {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .tag-pill:hover {
            border-color: var(--gold-deep);
            color: var(--gold-deep);
            background: rgba(217, 156, 42, 0.05);
        }

        .loading-pulse {
            animation: pulse 1.5s infinite ease-in-out;
        }
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body class="grain">
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useRef } from 'https://esm.sh/react@18.2.0';
        import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
        import htm from 'https://esm.sh/htm';
        import { GoogleGenAI, Type } from "https://esm.sh/@google/genai";

        const html = htm.bind(React.createElement);

        // --- Lógica de IA Gemini ---
        const getPairing = async (query) => {
            const genAI = new GoogleGenAI({ apiKey: process.env.API_KEY });
            const response = await genAI.models.generateContent({
                model: 'gemini-3-flash-preview',
                contents: `Contexto: Compinche, despensa social en una casa de patrimonio histórico en La Plata. El cliente busca: "${query}".`,
                config: {
                    systemInstruction: "Eres el Curador de Sabores de Compinche. Tu misión es sugerir un maridaje elegante de nuestra charcutería selecta y una bebida de nuestra cava. Sé evocativo, utiliza un lenguaje sofisticado y menciona sutilmente la atmósfera de jazz y la historia de la casa.",
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: Type.OBJECT,
                        properties: {
                            pairing: { type: Type.STRING },
                            vibe: { type: Type.STRING },
                            description: { type: Type.STRING }
                        },
                        required: ["pairing", "vibe", "description"]
                    }
                }
            });
            return JSON.parse(response.text);
        };

        // --- Hooks de Interacción ---
        const useReveal = () => {
            const ref = useRef(null);
            useEffect(() => {
                const observer = new IntersectionObserver(([entry]) => {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                }, { threshold: 0.1 });
                if (ref.current) observer.observe(ref.current);
                return () => observer.disconnect();
            }, []);
            return ref;
        };

        const useParallax = (speed = 0.15) => {
            const ref = useRef(null);
            useEffect(() => {
                let requestRef;
                const handleScroll = () => {
                    if (!ref.current) return;
                    const rect = ref.current.parentElement.getBoundingClientRect();
                    const windowHeight = window.innerHeight;
                    if (rect.top < windowHeight && rect.bottom > 0) {
                        const distance = (windowHeight / 2) - (rect.top + rect.height / 2);
                        const yPos = distance * speed;
                        ref.current.style.transform = `translate3d(0, ${yPos}px, 0)`;
                    }
                    requestRef = requestAnimationFrame(handleScroll);
                };
                requestRef = requestAnimationFrame(handleScroll);
                return () => cancelAnimationFrame(requestRef);
            }, [speed]);
            return ref;
        };

        // --- Componentes ---

        const Nav = ({ scrolled }) => {
            const scrollToSection = (e, id) => {
                e.preventDefault();
                const element = document.getElementById(id);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };

            return html`
                <nav className=${`fixed top-0 w-full z-50 transition-all duration-1000 px-10 py-8 flex justify-between items-center ${scrolled ? 'bg-[#F9F9F7]/95 backdrop-blur-md py-5 border-b border-[#6B7821]/10 shadow-sm' : 'bg-transparent'}`}>
                    <div className="font-serif text-3xl italic tracking-tight" style=${{ color: scrolled ? 'var(--olive)' : 'white' }}>Compinche</div>
                    <div className="hidden md:flex gap-16 text-[10px] uppercase tracking-[0.4em] font-light" style=${{ color: scrolled ? 'var(--charcoal)' : 'rgba(255,255,255,0.9)' }}>
                        <a href="#casa" onClick=${(e) => scrollToSection(e, 'casa')} className="hover:text-[#6B7821] transition-colors cursor-pointer">La Casa</a>
                        <a href="#curaduria" onClick=${(e) => scrollToSection(e, 'curaduria')} className="hover:text-[#6B7821] transition-colors cursor-pointer">Curaduría</a>
                        <a href="#maridaje" onClick=${(e) => scrollToSection(e, 'maridaje')} className="hover:text-[#6B7821] transition-colors cursor-pointer">Experiencia</a>
                    </div>
                    <a href="https://wa.me/5492214970906" target="_blank" className="text-[10px] uppercase tracking-[0.4em] border px-5 py-2 transition-all cursor-pointer hover:bg-[#6B7821] hover:text-white" 
                        style=${{ 
                            borderColor: scrolled ? 'var(--gold-deep)' : 'rgba(255,255,255,0.5)',
                            color: scrolled ? 'var(--charcoal)' : 'white'
                        }}>
                        Reservar
                    </a>
                </nav>
            `;
        };

        const Hero = () => {
            const imgRef = useParallax(0.3);
            return html`
                <header className="h-screen w-full relative flex items-center justify-center overflow-hidden bg-black">
                    <div className="absolute inset-0 z-0">
                        <img 
                            ref=${imgRef}
                            src="https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?auto=format&fit=crop&q=80&w=2000" 
                            className="parallax-img opacity-80" 
                        />
                        <div className="absolute inset-0 bg-gradient-to-b from-black/50 via-transparent to-[#F9F9F7]"></div>
                    </div>
                    <div className="relative z-10 text-center px-6 fade-in">
                        <p className="text-[#F3B404] uppercase tracking-[0.7em] text-[10px] mb-10 font-semibold drop-shadow-md">Patrimonio Moderno · La Plata</p>
                        <h1 className="font-serif text-7xl md:text-[11rem] text-white italic leading-[0.8] mb-8 select-none drop-shadow-lg">Compinche</h1>
                        <p className="text-white font-serif text-2xl italic opacity-95 max-w-2xl mx-auto tracking-wide drop-shadow">
                            Despensa social en una casa con historia.
                        </p>
                    </div>
                </header>
            `;
        };

        const StorySection = () => {
            const revealRef = useReveal();
            return html`
                <section id="casa" ref=${revealRef} className="py-32 px-10 section-reveal">
                    <div className="max-w-7xl mx-auto grid md:grid-cols-12 gap-20 items-center">
                        <div className="md:col-span-7">
                            <div className="line-draw mb-10"></div>
                            <span className="text-xs uppercase tracking-[0.4em] text-[#6B7821] font-bold mb-6 block">Nuestra Raíz</span>
                            <h2 className="font-serif text-5xl md:text-7xl italic leading-tight mb-10" style=${{ color: 'var(--charcoal)' }}>
                                El patrimonio cobra vida en los <span className="text-[#D99C2A]">pequeños rituales</span>.
                            </h2>
                            <p className="text-xl font-light leading-relaxed text-gray-600 max-w-xl">
                                Ubicada en una casona histórica platense, Compinche nace del deseo de preservar lo auténtico. Somos un refugio urbano donde la charcutería de autor y la selección de cava conviven con el ritmo pausado del jazz.
                            </p>
                        </div>
                        <div className="md:col-span-5 relative">
                            <div className="aspect-[3/4] overflow-hidden border-8 border-white shadow-2xl bg-gray-100">
                                <img 
                                    src="https://images.unsplash.com/photo-1600210491892-03d94ac25655?auto=format&fit=crop&q=80&w=1200" 
                                    className="w-full h-full object-cover" 
                                />
                            </div>
                        </div>
                    </div>
                </section>
            `;
        };

        const FeatureItem = ({ t, img, d }) => {
            const imgRef = useParallax(0.1);
            return html`
                <div className="group hover-lift">
                    <div className="aspect-[4/5] mb-8 relative parallax-container border border-[#6B7821]/10 shadow-lg">
                        <img 
                            ref=${imgRef}
                            src=${img} 
                            className="parallax-img grayscale-[20%] group-hover:grayscale-0 transition-all duration-1000" 
                        />
                        <div className="absolute inset-0 bg-[#6679A4]/5 group-hover:bg-transparent transition-colors"></div>
                    </div>
                    <h3 className="font-serif text-3xl italic mb-4" style=${{ color: 'var(--olive)' }}>${t}</h3>
                    <p className="text-gray-500 text-sm leading-relaxed">${d}</p>
                </div>
            `;
        };

        const FeatureSection = () => {
            const revealRef = useReveal();
            const features = [
                { 
                    t: 'Charcutería & Brindis', 
                    img: 'https://images.unsplash.com/photo-1511204648356-f6ed137d5707?auto=format&fit=crop&q=80&w=1000', 
                    d: 'Tablas de autor diseñadas para compartir, con piezas seleccionadas y trazabilidad artesanal.' 
                },
                { 
                    t: 'La Cava', 
                    img: 'https://images.unsplash.com/photo-1594498653385-d5172c532c00?auto=format&fit=crop&q=80&w=1000', 
                    d: 'Una estantería infinita de historias líquidas. Vinos de proyecto y etiquetas con alma.' 
                },
                { 
                    t: 'Barra & Encuentro', 
                    img: 'https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?auto=format&fit=crop&q=80&w=1000', 
                    d: 'El corazón de la casa. Coctelería clásica y tirada en un ambiente cálido y atemporal.' 
                }
            ];
            return html`
                <section id="curaduria" ref=${revealRef} className="py-32 px-10 section-reveal bg-[#6B7821]/5">
                    <div className="max-w-7xl mx-auto">
                        <div className="text-center mb-24">
                            <span className="text-[10px] uppercase tracking-[0.5em] text-[#6679A4] font-bold mb-4 block">La Propuesta</span>
                            <h2 className="font-serif text-6xl italic" style=${{ color: 'var(--charcoal)' }}>Curaduría de Origen</h2>
                        </div>
                        <div className="grid md:grid-cols-3 gap-16">
                            ${features.map(item => html`<${FeatureItem} key=${item.t} ...${item} />`)}
                        </div>
                    </div>
                </section>
            `;
        };

        const Assistant = () => {
            const [query, setQuery] = useState('');
            const [rec, setRec] = useState(null);
            const [loading, setLoading] = useState(false);
            const revealRef = useReveal();

            const handleSubmit = async (e) => {
                if (e) e.preventDefault();
                if (!query.trim()) return;
                setLoading(true);
                try {
                    const res = await getPairing(query);
                    setRec(res);
                } catch (err) { console.error(err); }
                setLoading(false);
            };

            const handleTagClick = (tag) => {
                setQuery(tag);
                setRec(null);
            };

            useEffect(() => {
                if (query && !loading && !rec) {
                    handleSubmit();
                }
            }, [query]);

            const tags = ["Jazz & Tintos", "Sabores Ahumados", "Noche de Amigos", "Tapeo de Autor"];

            return html`
                <section id="maridaje" ref=${revealRef} className="py-32 px-10 section-reveal">
                    <div className="max-w-4xl mx-auto border border-[#D99C2A]/20 bg-white p-12 md:p-24 shadow-2xl text-center relative overflow-hidden">
                        <div className="absolute top-0 right-0 w-32 h-32 bg-[#F3B404]/5 rounded-bl-full"></div>
                        <span className="text-[10px] uppercase tracking-[0.5em] text-[#D99C2A] font-bold mb-8 block">Curador de Sabores</span>
                        <h2 className="font-serif text-5xl italic mb-8" style=${{ color: 'var(--olive)' }}>¿Qué desea descubrir hoy?</h2>
                        <p className="text-gray-500 mb-12 max-w-lg mx-auto text-sm leading-relaxed">
                            Describa el sabor o el momento que busca. Nuestro sommelier virtual le guiará a través de nuestra cava para encontrar la recomendación perfecta.
                        </p>
                        
                        <form onSubmit=${handleSubmit} className="relative max-w-md mx-auto mb-10">
                            <input 
                                type="text" 
                                value=${query}
                                onChange=${e => setQuery(e.target.value)}
                                placeholder="Ej: Un vino intenso y algo para picar..."
                                className="w-full bg-transparent border-b border-[#6B7821]/30 py-4 px-2 focus:outline-none focus:border-[#D99C2A] transition-colors text-center font-serif text-xl placeholder:text-gray-300"
                            />
                            
                            <div className="flex flex-wrap justify-center gap-3 mt-8">
                                ${tags.map(tag => html`
                                    <button 
                                        type="button"
                                        key=${tag}
                                        onClick=${() => handleTagClick(tag)}
                                        className="tag-pill px-4 py-1.5 border border-[#6B7821]/20 rounded-full text-[9px] uppercase tracking-widest text-gray-400 font-semibold"
                                    >
                                        ${tag}
                                    </button>
                                `)}
                            </div>

                            <button 
                                type="submit"
                                disabled=${loading}
                                className="mt-12 px-12 py-3 bg-[#6B7821] text-white text-[10px] uppercase tracking-[0.4em] hover:bg-[#6679A4] transition-all disabled:opacity-30 shadow-lg"
                            >
                                ${loading ? 'Consultando...' : 'Obtener Recomendación'}
                            </button>
                        </form>

                        ${loading && html`<div className="loading-pulse text-[10px] uppercase tracking-widest text-gray-300">El sommelier está pensando...</div>`}

                        ${rec && !loading && html`
                            <div className="fade-in pt-12 border-t border-[#D99C2A]/10 mt-12">
                                <h4 className="font-serif text-3xl italic mb-4" style=${{ color: 'var(--gold-deep)' }}>${rec.pairing}</h4>
                                <p className="text-[#6679A4] text-[10px] uppercase tracking-[0.3em] mb-6 font-bold">Atmósfera: ${rec.vibe}</p>
                                <p className="text-gray-600 text-sm leading-relaxed max-w-xl mx-auto font-light">"${rec.description}"</p>
                            </div>
                        `}
                    </div>
                </section>
            `;
        };

        const Footer = () => html`
            <footer className="bg-[#1C1C1C] py-24 px-10 text-[#F9F9F7] relative">
                <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#6B7821] via-[#D99C2A] to-[#6679A4]"></div>
                <div className="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-end gap-20">
                    <div className="max-w-md">
                        <h3 className="font-serif text-6xl italic mb-10 text-[#F3B404]">Acompáñenos.</h3>
                        <div className="space-y-4 text-[10px] tracking-[0.5em] opacity-60 uppercase font-light">
                            <p>Calle 1 casi esq. 57 · La Plata · AR</p>
                            <p>Miércoles a Sábados · 19:00 a 01:00</p>
                            <a href="https://wa.me/5492214970906" target="_blank" className="block hover:text-[#F3B404] transition-colors cursor-pointer flex items-center gap-2">
                                <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.067 2.877 1.215 3.076.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                                Reserva vía WhatsApp
                            </a>
                        </div>
                    </div>
                    <div className="flex flex-col items-end gap-4">
                        <div className="flex flex-col items-end mb-4">
                            <a href="https://www.instagram.com/compinche.lp/" target="_blank" className="font-serif text-3xl italic hover:text-[#D99C2A] transition-all flex items-center gap-4">
                                Instagram
                                <svg className="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.332 3.608 1.308.975.975 1.245 2.242 1.308 3.608.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.063 1.366-.333 2.633-1.308 3.608-.975.975-2.242 1.245-3.608 1.308-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.366-.062-2.633-.332-3.608-1.308-.975-.975-1.245-2.242-1.308-3.608-.058-1.266-.07-1.646-.07-4.85s.012-3.584.07-4.85c.062-1.366.332-2.633 1.308-3.608.975-.975 2.242-1.245 3.608-1.308 1.266-.058 1.646-.07 4.85-.07zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.668-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                            </a>
                        </div>
                        <p className="text-[8px] uppercase tracking-[0.6em] opacity-30 mt-4">Compinche © 2024 · Patrimonio Moderno</p>
                    </div>
                </div>
            </footer>
        `;

        const App = () => {
            const [scrolled, setScrolled] = useState(false);
            useEffect(() => {
                const handleScroll = () => setScrolled(window.scrollY > 100);
                window.addEventListener('scroll', handleScroll, { passive: true });
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            return html`
                <div className="min-h-screen">
                    <${Nav} scrolled=${scrolled} />
                    <${Hero} />
                    <${StorySection} />
                    <${FeatureSection} />
                    <${Assistant} />
                    <${Footer} />
                </div>
            `;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(html`<${App} />`);
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
